% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export_with_schema.R
\name{export_with_schema}
\alias{export_with_schema}
\title{Export a dataset with schema logging}
\usage{
export_with_schema(
  data,
  path = NULL,
  table_name,
  data_year,
  data_source,
  data_description,
  dim_description = NULL,
  user_note,
  char_cols = c("cds", "county_code", "district_code", "school_code"),
  compress = FALSE,
  n_check = 6,
  export_log_path = "T:/Data Warehouse/export_log.csv",
  max_char = 255,
  primary_key = NULL,
  foreign_keys = NULL,
  canonical_table_id = NULL,
  dimension_type = NULL
)
}
\arguments{
\item{data}{A data frame to be exported and documented.}

\item{path}{Optional. The file path where the data will be saved. If `NULL`, the path is generated internally.}

\item{table_name}{A valid SQL-style name for the exported table.}

\item{data_year}{A 4-digit string or number indicating the year of the data.}

\item{data_source}{A short string describing the source of the data (e.g., `"CDE"`, `"SBAC"`).}

\item{data_description}{A human-readable description of the dataset being exported.}

\item{dim_description}{Optional. A short description for dimension tables (if applicable).}

\item{user_note}{A brief note about the export (e.g., filtering, transformations, versioning).}

\item{char_cols}{Character vector of column names to force as character during export. Defaults to common CDE identifiers.}

\item{compress}{Logical. If `TRUE`, exports the file as `.csv.gz`. Default is `FALSE`.}

\item{n_check}{Integer. Number of rows to print during export preview. Default is 6.}

\item{export_log_path}{File path to the export log CSV. Default is a shared T drive location.}

\item{max_char}{Maximum allowed character length for string columns in the schema log. Default is 255.}

\item{primary_key}{Optional. A vector of column names representing the table's primary key.}

\item{foreign_keys}{Optional. A named list representing foreign key relationships.}

\item{canonical_table_id}{Optional. A unique identifier used for linking across data products.}

\item{dimension_type}{Optional. A label to describe the type of dimension (e.g., `"student"`, `"school"`).}
}
\value{
Invisibly returns `NULL`. Files are written to disk, and schema is logged to the SQL schema log.
}
\description{
Safely exports a dataset to disk and logs its schema metadata to a SQL schema log. This function
wraps both `safe_fwrite()` and `sql_schema_log()` to ensure consistent output and documentation
of table structure for downstream use in data pipelines or warehouses.
}
